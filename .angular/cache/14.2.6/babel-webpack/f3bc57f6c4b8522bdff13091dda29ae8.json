{"ast":null,"code":"import _asyncToGenerator from \"D:/My_Programs/Lovely_Wires/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { BuyService } from '../services/buy.service';\nimport { WireService } from '../services/wire.service';\nimport { PriceService } from '../services/price.service';\nimport { CoilService } from '../services/coil.service';\nimport { ConnectorService } from '../services/connector.service';\nimport { Wire } from './models/wire';\nimport { Price } from './models/price';\nimport { Connector } from './models/connector';\nimport { Coil } from './models/coil';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/buy.service\";\nimport * as i2 from \"../services/price.service\";\nimport * as i3 from \"../services/wire.service\";\nimport * as i4 from \"../services/coil.service\";\nimport * as i5 from \"../services/connector.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\n\nfunction MakeBuyComponent_option_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const wire_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", wire_r2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(wire_r2.name);\n  }\n}\n\nfunction MakeBuyComponent_tr_52_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\", 29);\n    i0.ɵɵlistener(\"click\", function MakeBuyComponent_tr_52_Template_tr_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const buy_r3 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.editBuy(buy_r3));\n    });\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\")(12, \"button\", 30);\n    i0.ɵɵlistener(\"click\", function MakeBuyComponent_tr_52_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const buy_r3 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.deleteBuy(buy_r3._id));\n    });\n    i0.ɵɵtext(13, \"Delete\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const buy_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(buy_r3.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(buy_r3.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(buy_r3.item);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(buy_r3.cost);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(buy_r3.count);\n  }\n}\n\nexport class MakeBuyComponent {\n  constructor(buyserv, priceserv, wireserv, coilserv, conserv) {\n    this.buyserv = buyserv;\n    this.priceserv = priceserv;\n    this.wireserv = wireserv;\n    this.coilserv = coilserv;\n    this.conserv = conserv;\n    this.buys = new Array();\n    this.wires = new Array();\n    this.prices = new Array();\n    this.newbuy = this.resetBuy();\n    this.editbuy = this.resetBuy();\n    this.firstconprice = this.resetPrice();\n    this.secondconprice = this.resetPrice();\n    this.coilprice = this.resetPrice();\n    this.selectedcoil = this.resetCoil();\n    this.selectedfirstcon = this.resetConnector();\n    this.selectedsecondcon = this.resetConnector();\n    this.resetWire();\n  }\n\n  ngOnInit() {\n    this.getBuys();\n    this.getWires();\n    this.getPrices();\n  }\n\n  getBuys() {\n    this.buyserv.getBuys().subscribe(data => {\n      this.buys = data;\n    }, e => {\n      console.log(e);\n    });\n  }\n\n  getWires() {\n    this.wireserv.getWires().subscribe(data => {\n      this.wires = data;\n    }, e => {\n      console.log(e);\n    });\n  }\n\n  getPrices() {\n    this.priceserv.getPrices().subscribe(data => {\n      this.prices = data;\n    }, e => {\n      console.log(e);\n    });\n  }\n\n  getBuy(id) {\n    let tempbuy;\n    this.buyserv.getBuy(id).subscribe(data => {\n      console.log(data);\n      tempbuy = data;\n    }, e => {\n      console.log(e);\n    });\n\n    if (tempbuy != undefined) {\n      return tempbuy;\n    }\n\n    return null;\n  }\n\n  postBuy() {\n    console.log(this.newbuy);\n\n    if (this.newbuy.name != \"\" && this.newbuy.item != \"\" && this.newbuy.description != \"\") {\n      let tempBuy;\n      this.buyserv.postBuy(this.newbuy).subscribe(data => {\n        console.log(data);\n        tempBuy._id = data.insertedId;\n      }, e => {\n        return console.log(e);\n      });\n      this.buys.push(this.getBuy(tempBuy._id));\n    }\n  }\n\n  putBuy() {\n    this.buyserv.putBuy(this.editbuy).subscribe(data => {\n      console.log(data);\n    }, e => {\n      console.log(e);\n    });\n    this.buys.find(b => b._id == this.editbuy._id).name = this.editbuy.name;\n    this.buys.find(b => b._id == this.editbuy._id).count = this.editbuy.count;\n    this.buys.find(b => b._id == this.editbuy._id).cost = this.editbuy.cost;\n    this.buys.find(b => b._id == this.editbuy._id).description = this.editbuy.description;\n    this.buys.forEach(b => {\n      console.log(b);\n    });\n  }\n\n  deleteBuy(id) {\n    this.buyserv.deleteBuy(id).subscribe(data => {\n      console.log(data);\n    }, e => {\n      return console.log(e);\n    });\n    this.getBuys();\n  }\n\n  getConnector(id, first) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      let connector = yield _this.conserv.getConnector(id).toPromise();\n      console.log(connector);\n      return connector; //await this.conserv.getConnector(id).subscribe((data: Connector) => {\n      //  console.log(data);\n      //  if (first) {\n      //    this.selectedfirstcon = data;\n      //  }\n      //  else {\n      //    this.selectedsecondcon = data;\n      //  }\n      //}, (e) => {\n      //  console.log(e);\n      //});\n    })();\n  }\n\n  getCoil(id) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      let coil = _this2.coilserv.getCoil(id).toPromise();\n\n      console.log(coil);\n      return coil; //this.coilserv.getCoil(id).subscribe((data: Coil) => {\n      //  console.log(data);\n      //  this.selectedcoil = data;\n      //}, (e) => {\n      //  console.log(e);\n      //});\n    })();\n  }\n\n  selectItem() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      _this3.firstconprice = _this3.prices.find(p => p.itemofprice._id == _this3.selectedwire.firstconn);\n      _this3.secondconprice = _this3.prices.find(p => p.itemofprice._id == _this3.selectedwire.secondconn);\n      _this3.coilprice = _this3.prices.find(p => p.itemofprice._id == _this3.selectedwire.coil);\n      _this3.selectedfirstcon = yield _this3.getConnector(_this3.selectedwire.firstconn, true);\n      _this3.selectedsecondcon = yield _this3.getConnector(_this3.selectedwire.secondconn, false);\n      _this3.selectedcoil = yield _this3.getCoil(_this3.selectedwire.coil);\n      _this3.tempcost = _this3.firstconprice.cost + _this3.secondconprice.cost + _this3.coilprice.cost * _this3.selectedwire.length;\n\n      if (_this3.firstconprice == undefined || _this3.secondconprice == undefined || _this3.coilprice == undefined) {\n        if (_this3.firstconprice == undefined) {\n          _this3.firstconprice = _this3.resetPrice();\n        }\n\n        if (_this3.secondconprice == undefined) {\n          _this3.secondconprice = _this3.resetPrice();\n        }\n\n        if (_this3.coilprice == undefined) {\n          _this3.coilprice = _this3.resetPrice();\n        }\n\n        alert(\"Не все цены на компоненты установлены, используйте Price Manager\");\n        return console.log(\"Не все цены на компоненты установлены\");\n      }\n\n      console.log(_this3.firstconprice);\n      console.log(_this3.secondconprice);\n      console.log(_this3.coilprice);\n      console.log(`firstconprice:${_this3.firstconprice.cost}`);\n      console.log(`secondconprice:${_this3.secondconprice.cost}`);\n      console.log(`coilconprice:${_this3.coilprice.cost}`);\n      console.log(_this3.selectedfirstcon);\n\n      _this3.changeCost(true);\n\n      _this3.newbuy.item = `${_this3.selectedfirstcon.name},\n                        ${_this3.selectedfirstcon.type};\n                        ${_this3.selectedsecondcon.name},\n                        ${_this3.selectedsecondcon.type};\n                        ${_this3.selectedcoil.name},\n                        ${_this3.selectedcoil.type}`;\n      console.log(_this3.newbuy.item);\n    })();\n  }\n\n  editBuy(buy) {\n    this.editbuy = buy;\n    this.tempcost = this.editbuy.cost / this.editbuy.count;\n  }\n\n  resetBuy() {\n    return {\n      _id: \"\",\n      name: \"\",\n      description: \"\",\n      item: \"\",\n      cost: 0,\n      count: 1\n    };\n  }\n\n  resetWire() {\n    this.selectedwire = new Wire(\"\", \"\", \"\", \"\", \"\", 0);\n  }\n\n  resetPrice() {\n    return new Price(\"\", \"\", 0, {\n      _id: \"\",\n      name: \"\",\n      type: \"\"\n    });\n  }\n\n  resetCoil() {\n    return new Coil(\"\", \"\", \"\", \"\", 0);\n  }\n\n  resetConnector() {\n    return new Connector(\"\", \"\", \"\", 0);\n  }\n\n  changeCost(isNew) {\n    let buy;\n\n    if (isNew) {\n      buy = this.newbuy; //this.newbuy.cost =this.newbuy.count * this.tempcost;\n    } else {\n      buy = this.editbuy; //this.editbuy.cost = this.editbuy.count * this.tempcost;\n    }\n\n    buy.cost = buy.count * this.tempcost;\n    console.log(`cost ${this.newbuy.cost}\\n count ${this.newbuy.count}`);\n  }\n\n  cancelEdit() {}\n\n  saveEdit() {\n    this.putBuy();\n  }\n\n}\n\nMakeBuyComponent.ɵfac = function MakeBuyComponent_Factory(t) {\n  return new (t || MakeBuyComponent)(i0.ɵɵdirectiveInject(i1.BuyService), i0.ɵɵdirectiveInject(i2.PriceService), i0.ɵɵdirectiveInject(i3.WireService), i0.ɵɵdirectiveInject(i4.CoilService), i0.ɵɵdirectiveInject(i5.ConnectorService));\n};\n\nMakeBuyComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: MakeBuyComponent,\n  selectors: [[\"make-buy\"]],\n  features: [i0.ɵɵProvidersFeature([BuyService, WireService, PriceService, CoilService, ConnectorService])],\n  decls: 79,\n  vars: 22,\n  consts: [[1, \"container\"], [1, \"row\"], [1, \"col-5\"], [\"type\", \"text\", \"placeholder\", \"Buy's name\", \"name\", \"ngNewBuyName\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"ngNewBuyItem\", 1, \"form-select\", 3, \"ngModel\", \"ngModelChange\"], [\"value\", \"\"], [3, \"ngValue\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-6\"], [1, \"col-4\"], [\"type\", \"number\", \"name\", \"ngNewBuyCount\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"rows\", \"5\", \"name\", \"ngNewBuyDescriprion\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"btn\", \"btn-secondary\", 3, \"click\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"table\", \"table-hover\", \"table-striped\", \"table-dark\"], [\"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#buysModal\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"buysModal\", \"aria-hidden\", \"true\", \"aria-labelledby\", \"modalLabel\", \"tabindex\", \"-1\", 1, \"modal\", \"fage\"], [1, \"modal-dialog\"], [1, \"modal-content\"], [1, \"modal-header\"], [\"id\", \"modalLabel\", 1, \"modal-title\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"btn-close\"], [1, \"modal-body\"], [\"type\", \"text\", \"placeholder\", \"Change name\", \"name\", \"ngEditBuyName\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"number\", \"placeholder\", \"Change count\", \"name\", \"ngEditBuyCount\", 3, \"ngModel\", \"ngModelChange\"], [\"rows\", \"5\", \"name\", \"ngEditBuyDescription\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"modal-footer\"], [1, \"btn\", \"btn-secondary\", \"btn-close\", 3, \"click\"], [1, \"btn\", \"btn-successful\", 3, \"click\"], [3, \"ngValue\"], [\"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#buysModal\", 3, \"click\"], [1, \"btn\", \"btn-danger\", 3, \"click\"]],\n  template: function MakeBuyComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h5\");\n      i0.ɵɵtext(2, \"Buys Manager\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 0)(4, \"form\")(5, \"div\", 1)(6, \"div\", 2)(7, \"input\", 3);\n      i0.ɵɵlistener(\"ngModelChange\", function MakeBuyComponent_Template_input_ngModelChange_7_listener($event) {\n        return ctx.newbuy.name = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(8, \"div\", 2)(9, \"select\", 4);\n      i0.ɵɵlistener(\"ngModelChange\", function MakeBuyComponent_Template_select_ngModelChange_9_listener($event) {\n        return ctx.selectedwire = $event;\n      })(\"ngModelChange\", function MakeBuyComponent_Template_select_ngModelChange_9_listener() {\n        return ctx.selectItem();\n      });\n      i0.ɵɵelementStart(10, \"option\", 5);\n      i0.ɵɵtext(11, \"Select item...\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(12, MakeBuyComponent_option_12_Template, 2, 2, \"option\", 6);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(13, \"div\", 1)(14, \"div\", 7)(15, \"h5\");\n      i0.ɵɵtext(16);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"h5\");\n      i0.ɵɵtext(18);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"h5\");\n      i0.ɵɵtext(20);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"h5\");\n      i0.ɵɵtext(22);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(23, \"h4\");\n      i0.ɵɵtext(24);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(25, \"div\", 8)(26, \"input\", 9);\n      i0.ɵɵlistener(\"ngModelChange\", function MakeBuyComponent_Template_input_ngModelChange_26_listener($event) {\n        return ctx.newbuy.count = $event;\n      })(\"ngModelChange\", function MakeBuyComponent_Template_input_ngModelChange_26_listener() {\n        return ctx.changeCost(true);\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(27, \"div\", 0)(28, \"textarea\", 10);\n      i0.ɵɵlistener(\"ngModelChange\", function MakeBuyComponent_Template_textarea_ngModelChange_28_listener($event) {\n        return ctx.newbuy.description = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(29, \"div\", 1)(30, \"div\", 2)(31, \"button\", 11);\n      i0.ɵɵlistener(\"click\", function MakeBuyComponent_Template_button_click_31_listener() {\n        return ctx.resetBuy();\n      });\n      i0.ɵɵtext(32, \"Reset\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(33, \"div\", 2)(34, \"button\", 12);\n      i0.ɵɵlistener(\"click\", function MakeBuyComponent_Template_button_click_34_listener() {\n        return ctx.postBuy();\n      });\n      i0.ɵɵtext(35, \"Make buy\");\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(36, \"div\", 0)(37, \"table\", 13)(38, \"thead\")(39, \"tr\")(40, \"th\");\n      i0.ɵɵtext(41, \"Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(42, \"th\");\n      i0.ɵɵtext(43, \"Decription\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(44, \"th\");\n      i0.ɵɵtext(45, \"Item\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(46, \"th\");\n      i0.ɵɵtext(47, \"Cost\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(48, \"th\");\n      i0.ɵɵtext(49, \"Count\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(50, \"th\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(51, \"tbody\");\n      i0.ɵɵtemplate(52, MakeBuyComponent_tr_52_Template, 14, 5, \"tr\", 14);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(53, \"div\", 15)(54, \"div\", 16)(55, \"div\", 17)(56, \"div\", 18)(57, \"h5\", 19);\n      i0.ɵɵtext(58);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(59, \"button\", 20);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(60, \"div\", 21)(61, \"form\")(62, \"div\", 1)(63, \"div\", 2)(64, \"input\", 22);\n      i0.ɵɵlistener(\"ngModelChange\", function MakeBuyComponent_Template_input_ngModelChange_64_listener($event) {\n        return ctx.editbuy.name = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(65, \"div\", 2)(66, \"input\", 23);\n      i0.ɵɵlistener(\"ngModelChange\", function MakeBuyComponent_Template_input_ngModelChange_66_listener($event) {\n        return ctx.editbuy.count = $event;\n      })(\"ngModelChange\", function MakeBuyComponent_Template_input_ngModelChange_66_listener() {\n        return ctx.changeCost(false);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(67, \"p\");\n      i0.ɵɵtext(68);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(69, \"div\", 0)(70, \"textarea\", 24);\n      i0.ɵɵlistener(\"ngModelChange\", function MakeBuyComponent_Template_textarea_ngModelChange_70_listener($event) {\n        return ctx.editbuy.description = $event;\n      });\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(71, \"div\", 25)(72, \"div\", 1)(73, \"div\", 2)(74, \"button\", 26);\n      i0.ɵɵlistener(\"click\", function MakeBuyComponent_Template_button_click_74_listener() {\n        return ctx.cancelEdit();\n      });\n      i0.ɵɵtext(75, \"Cancel\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(76, \"div\", 2)(77, \"button\", 27);\n      i0.ɵɵlistener(\"click\", function MakeBuyComponent_Template_button_click_77_listener() {\n        return ctx.saveEdit();\n      });\n      i0.ɵɵtext(78, \"Save\");\n      i0.ɵɵelementEnd()()()()()()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngModel\", ctx.newbuy.name);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngModel\", ctx.selectedwire);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.wires);\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate3(\"First connector:\", ctx.selectedfirstcon.name, \",\", ctx.selectedfirstcon.type, \":\", ctx.firstconprice.cost, \"$\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate3(\"Second connector:\", ctx.selectedsecondcon.name, \",\", ctx.selectedsecondcon.type, \":\", ctx.secondconprice.cost, \"$\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate3(\"Coil:\", ctx.selectedcoil.name, \",\", ctx.selectedcoil.type, \":\", ctx.coilprice.cost, \"$\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"Wire's length:\", ctx.selectedwire.length, \"m\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"Cost:\", ctx.newbuy.cost, \"$\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngModel\", ctx.newbuy.count);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngModel\", ctx.newbuy.description);\n      i0.ɵɵadvance(24);\n      i0.ɵɵproperty(\"ngForOf\", ctx.buys);\n      i0.ɵɵadvance(6);\n      i0.ɵɵtextInterpolate(ctx.editbuy.name);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.editbuy.name);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngModel\", ctx.editbuy.count);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.editbuy.cost);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngModel\", ctx.editbuy.description);\n    }\n  },\n  dependencies: [i6.NgForOf, i7.ɵNgNoValidate, i7.NgSelectOption, i7.ɵNgSelectMultipleOption, i7.DefaultValueAccessor, i7.NumberValueAccessor, i7.SelectControlValueAccessor, i7.NgControlStatus, i7.NgControlStatusGroup, i7.NgModel, i7.NgForm],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"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","names":["BuyService","WireService","PriceService","CoilService","ConnectorService","Wire","Price","Connector","Coil","i0","MakeBuyComponent","constructor","buyserv","priceserv","wireserv","coilserv","conserv","buys","Array","wires","prices","newbuy","resetBuy","editbuy","firstconprice","resetPrice","secondconprice","coilprice","selectedcoil","resetCoil","selectedfirstcon","resetConnector","selectedsecondcon","resetWire","ngOnInit","getBuys","getWires","getPrices","subscribe","data","e","console","log","getBuy","id","tempbuy","undefined","postBuy","name","item","description","tempBuy","_id","insertedId","push","putBuy","find","b","count","cost","forEach","deleteBuy","getConnector","first","connector","toPromise","getCoil","coil","selectItem","p","itemofprice","selectedwire","firstconn","secondconn","tempcost","length","alert","changeCost","type","editBuy","buy","isNew","cancelEdit","saveEdit","selectors","features","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["D:\\My_Programs\\Lovely_Wires\\src\\app\\components\\makebuy.component.ts","D:\\My_Programs\\Lovely_Wires\\src\\app\\components\\html\\makebuy.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { NgForm, NgModel } from '@angular/forms';\r\nimport { IBuy } from './models/IBuy.interface';\r\nimport { BuyService } from '../services/buy.service';\r\nimport { WireService } from '../services/wire.service';\r\nimport { PriceService } from '../services/price.service';\r\nimport { CoilService } from '../services/coil.service';\r\nimport { ConnectorService } from '../services/connector.service';\r\nimport { Wire } from './models/wire';\r\nimport { Price } from './models/price';\r\nimport { Connector } from './models/connector';\r\nimport { Coil } from './models/coil';\r\n\r\n@Component({\r\n\r\n  selector: 'make-buy',\r\n  templateUrl: `./html/makebuy.component.html`,\r\n  providers: [BuyService, WireService, PriceService, CoilService, ConnectorService]\r\n\r\n})\r\n\r\nexport class MakeBuyComponent implements OnInit {\r\n\r\n  buys: IBuy[];\r\n  wires: Wire[];\r\n  prices: Price[];\r\n  newbuy: IBuy;\r\n  selectedwire: Wire;\r\n  selectedfirstcon: Connector;\r\n  selectedsecondcon: Connector;\r\n  selectedcoil: Coil;\r\n  editbuy: IBuy;\r\n  firstconprice: Price;\r\n  secondconprice: Price;\r\n  coilprice: Price;\r\n  tempcost: number;\r\n\r\n\r\n\r\n  constructor(\r\n    private buyserv: BuyService,\r\n    private priceserv: PriceService,\r\n    private wireserv: WireService,\r\n    private coilserv: CoilService,\r\n    private conserv: ConnectorService) {\r\n\r\n    this.buys = new Array<IBuy>();\r\n    this.wires = new Array<Wire>();\r\n    this.prices = new Array<Price>();\r\n    this.newbuy = this.resetBuy();\r\n    this.editbuy = this.resetBuy();\r\n    this.firstconprice = this.resetPrice();\r\n    this.secondconprice = this.resetPrice();\r\n    this.coilprice = this.resetPrice();\r\n    this.selectedcoil = this.resetCoil();\r\n    this.selectedfirstcon = this.resetConnector();\r\n    this.selectedsecondcon = this.resetConnector();\r\n    this.resetWire();\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n    this.getBuys();\r\n    this.getWires();\r\n    this.getPrices();\r\n\r\n  }\r\n\r\n  getBuys() {\r\n\r\n    this.buyserv.getBuys().subscribe((data) => {\r\n\r\n      this.buys = data;\r\n\r\n    }, (e) => {\r\n\r\n      console.log(e);\r\n\r\n    });\r\n\r\n  }\r\n\r\n  getWires() {\r\n\r\n    this.wireserv.getWires().subscribe((data) => {\r\n\r\n      this.wires = data;\r\n\r\n    }, (e) => {\r\n\r\n      console.log(e);\r\n\r\n    });\r\n\r\n  }\r\n\r\n  getPrices() {\r\n\r\n    this.priceserv.getPrices().subscribe((data) => {\r\n\r\n      this.prices = data;\r\n\r\n    }, (e) => {\r\n\r\n      console.log(e);\r\n\r\n    });\r\n\r\n  }\r\n\r\n  getBuy(id: string): IBuy | null {\r\n    let tempbuy: IBuy;\r\n    this.buyserv.getBuy(id).subscribe((data: IBuy) => {\r\n\r\n      console.log(data);\r\n      tempbuy = data;\r\n\r\n    }, (e) => {\r\n\r\n      console.log(e);\r\n\r\n    });\r\n    if (tempbuy != undefined) {\r\n\r\n      return tempbuy;\r\n\r\n    }\r\n    return null;\r\n\r\n  }\r\n\r\n  postBuy() {\r\n\r\n    console.log(this.newbuy);\r\n\r\n    if (this.newbuy.name != \"\" && this.newbuy.item != \"\" && this.newbuy.description != \"\") {\r\n      let tempBuy: IBuy;\r\n      this.buyserv.postBuy(this.newbuy as IBuy).subscribe((data) => {\r\n\r\n        console.log(data);\r\n\r\n        tempBuy._id = data.insertedId;\r\n       \r\n\r\n      }, (e) => {\r\n\r\n        return console.log(e);\r\n\r\n      });\r\n\r\n      this.buys.push(this.getBuy(tempBuy._id));\r\n\r\n\r\n    }\r\n\r\n  }\r\n\r\n  putBuy() {\r\n    \r\n    this.buyserv.putBuy(this.editbuy as IBuy).subscribe((data) => {\r\n\r\n      console.log(data);\r\n\r\n    },(e) => {\r\n\r\n      console.log(e);\r\n\r\n    });\r\n\r\n    this.buys.find(b => b._id == this.editbuy._id).name = this.editbuy.name;\r\n    this.buys.find(b => b._id == this.editbuy._id).count = this.editbuy.count;\r\n    this.buys.find(b => b._id == this.editbuy._id).cost = this.editbuy.cost;\r\n    this.buys.find(b => b._id == this.editbuy._id).description = this.editbuy.description;\r\n\r\n    this.buys.forEach(b => {\r\n\r\n      console.log(b);\r\n\r\n    });\r\n\r\n  }\r\n\r\n  deleteBuy(id:string) {\r\n\r\n    \r\n    this.buyserv.deleteBuy(id).subscribe((data) => {\r\n\r\n      \r\n      console.log(data);\r\n\r\n\r\n    }, (e) => {\r\n\r\n      return console.log(e);\r\n\r\n    })\r\n\r\n    this.getBuys();\r\n\r\n\r\n  }\r\n\r\n  async getConnector(id: string, first: boolean) {\r\n\r\n\r\n    let connector: Connector = await this.conserv.getConnector(id).toPromise();\r\n  \r\n    console.log(connector);\r\n\r\n    return connector;\r\n    //await this.conserv.getConnector(id).subscribe((data: Connector) => {\r\n\r\n    //  console.log(data);\r\n    //  if (first) {\r\n\r\n    //    this.selectedfirstcon = data;\r\n\r\n    //  }\r\n    //  else {\r\n\r\n    //    this.selectedsecondcon = data;\r\n\r\n    //  }\r\n\r\n    //}, (e) => {\r\n\r\n    //  console.log(e);\r\n      \r\n    //});\r\n\r\n    \r\n  }\r\n\r\n  async getCoil(id: string){\r\n\r\n    let coil = this.coilserv.getCoil(id).toPromise();\r\n\r\n    console.log(coil);\r\n\r\n    return coil;\r\n\r\n    //this.coilserv.getCoil(id).subscribe((data: Coil) => {\r\n\r\n    //  console.log(data);\r\n    //  this.selectedcoil = data;\r\n\r\n    //}, (e) => {\r\n\r\n    //  console.log(e);\r\n\r\n    //});\r\n\r\n\r\n  }\r\n\r\n  async selectItem() {\r\n\r\n    this.firstconprice = this.prices.find(p => p.itemofprice._id == this.selectedwire.firstconn);\r\n    this.secondconprice = this.prices.find(p => p.itemofprice._id == this.selectedwire.secondconn);\r\n    this.coilprice = this.prices.find(p => p.itemofprice._id == this.selectedwire.coil);\r\n\r\n    this.selectedfirstcon = await this.getConnector(this.selectedwire.firstconn, true);\r\n    this.selectedsecondcon = await this.getConnector(this.selectedwire.secondconn, false);\r\n    this.selectedcoil = await this.getCoil(this.selectedwire.coil);\r\n\r\n    this.tempcost = this.firstconprice.cost + this.secondconprice.cost + (this.coilprice.cost * this.selectedwire.length);\r\n\r\n    if (this.firstconprice == undefined || this.secondconprice == undefined || this.coilprice == undefined) {\r\n      if (this.firstconprice == undefined) {\r\n        this.firstconprice = this.resetPrice();\r\n      }\r\n      if (this.secondconprice == undefined) {\r\n        this.secondconprice = this.resetPrice();\r\n      }\r\n      if (this.coilprice == undefined) {\r\n        this.coilprice = this.resetPrice();\r\n      }\r\n      alert(\"Не все цены на компоненты установлены, используйте Price Manager\");\r\n      return console.log(\"Не все цены на компоненты установлены\");\r\n    }\r\n\r\n    console.log(this.firstconprice);\r\n    console.log(this.secondconprice);\r\n    console.log(this.coilprice);\r\n\r\n    console.log(`firstconprice:${this.firstconprice.cost}`);\r\n    console.log(`secondconprice:${this.secondconprice.cost}`);\r\n    console.log(`coilconprice:${this.coilprice.cost}`);\r\n    console.log(this.selectedfirstcon);\r\n    this.changeCost(true);\r\n    this.newbuy.item = `${this.selectedfirstcon.name},\r\n                        ${this.selectedfirstcon.type};\r\n                        ${this.selectedsecondcon.name},\r\n                        ${this.selectedsecondcon.type};\r\n                        ${this.selectedcoil.name},\r\n                        ${this.selectedcoil.type}`;\r\n\r\n    console.log(this.newbuy.item);\r\n\r\n  }\r\n\r\n\r\n  editBuy(buy: IBuy) {\r\n\r\n    this.editbuy = buy;\r\n    this.tempcost = this.editbuy.cost / this.editbuy.count;\r\n\r\n  }\r\n\r\n  resetBuy(): IBuy {\r\n\r\n    return {\r\n      _id: \"\",\r\n      name: \"\",\r\n      description: \"\",\r\n      item: \"\",\r\n      cost: 0,\r\n      count: 1\r\n    }\r\n    \r\n\r\n  }\r\n\r\n  resetWire() {\r\n\r\n    this.selectedwire = new Wire(\"\", \"\", \"\", \"\", \"\", 0);\r\n\r\n  }\r\n\r\n  resetPrice():Price {\r\n\r\n    return new Price(\"\", \"\", 0, { _id: \"\", name: \"\", type: \"\" });\r\n\r\n  }\r\n\r\n  resetCoil(): Coil {\r\n\r\n    return new Coil(\"\", \"\", \"\", \"\", 0);\r\n\r\n  }\r\n\r\n  resetConnector(): Connector {\r\n\r\n    return new Connector(\"\", \"\", \"\", 0);\r\n\r\n  }\r\n\r\n  changeCost(isNew: boolean) {\r\n    let buy: IBuy;\r\n    if (isNew) {\r\n\r\n      buy = this.newbuy;\r\n      //this.newbuy.cost =this.newbuy.count * this.tempcost;\r\n\r\n    }\r\n    else {\r\n      buy = this.editbuy;\r\n      //this.editbuy.cost = this.editbuy.count * this.tempcost;\r\n\r\n    }\r\n\r\n    buy.cost = buy.count * this.tempcost;\r\n    console.log(`cost ${this.newbuy.cost}\\n count ${this.newbuy.count}`);\r\n\r\n  }\r\n\r\n  cancelEdit() {\r\n\r\n\r\n  }\r\n\r\n  saveEdit() {\r\n\r\n    this.putBuy();\r\n\r\n  }\r\n\r\n}\r\n","<div class=\"container\">\r\n  <h5>Buys Manager</h5>\r\n  <div class=\"container\">\r\n    <form>\r\n\r\n      <div class=\"row\">\r\n\r\n        <div class=\"col-5\">\r\n          <input\r\n                 type=\"text\"\r\n                 class=\"form-control\"\r\n                 placeholder=\"Buy's name\"\r\n                 [(ngModel)]=\"newbuy.name\"\r\n                 name=\"ngNewBuyName\"/>\r\n        </div>\r\n\r\n        <div class=\"col-5\">\r\n          <select\r\n                  class=\"form-select\"\r\n                  [(ngModel)]=\"selectedwire\"\r\n                  (ngModelChange)=\"selectItem()\"\r\n                  name=\"ngNewBuyItem\">\r\n            <option value=\"\">Select item...</option>\r\n            <option [ngValue]=\"wire\" *ngFor=\"let wire of wires\">{{wire.name}}</option>\r\n          </select>\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <div class=\"row\">\r\n\r\n        <div class=\"col-6\">\r\n          <h5>First connector:{{selectedfirstcon.name}},{{selectedfirstcon.type}}:{{firstconprice.cost}}$</h5>\r\n          <h5>Second connector:{{selectedsecondcon.name}},{{selectedsecondcon.type}}:{{secondconprice.cost}}$</h5>\r\n          <h5>Coil:{{selectedcoil.name}},{{selectedcoil.type}}:{{coilprice.cost}}$</h5>\r\n          <h5>Wire's length:{{selectedwire.length}}m</h5>\r\n          <h4>Cost:{{newbuy.cost}}$</h4>\r\n\r\n        </div>\r\n        <div class=\"col-4\">\r\n\r\n          <input\r\n                 class=\"form-control\"\r\n                 type=\"number\"\r\n                 [(ngModel)]=\"newbuy.count\"\r\n                 (ngModelChange)=\"changeCost(true)\"\r\n                 name=\"ngNewBuyCount\"/>\r\n\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"container\">\r\n\r\n        <textarea\r\n                  class=\"form-control\"\r\n                  [(ngModel)]=\"newbuy.description\"\r\n                  rows=\"5\"\r\n                  name=\"ngNewBuyDescriprion\"></textarea>\r\n\r\n      </div>\r\n\r\n      <div class=\"row\">\r\n\r\n        <div class=\"col-5\">\r\n\r\n          <button class=\"btn btn-secondary\" (click)=\"resetBuy()\">Reset</button>\r\n\r\n        </div>\r\n\r\n        <div class=\"col-5\">\r\n\r\n          <button class=\"btn btn-primary\" (click)=\"postBuy()\">Make buy</button>\r\n\r\n        </div>\r\n      </div>\r\n\r\n    </form>\r\n  </div>\r\n\r\n  <div class=\"container\">\r\n\r\n    <table class=\"table table-hover table-striped table-dark\">\r\n      <thead>\r\n        <tr>\r\n          <th>Name</th>\r\n          <th>Decription</th>\r\n          <th>Item</th>\r\n          <th>Cost</th>\r\n          <th>Count</th>\r\n          <th></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr\r\n            (click)=\"editBuy(buy)\"\r\n            *ngFor=\"let buy of buys\"\r\n            data-bs-toggle=\"modal\"\r\n            data-bs-target=\"#buysModal\">\r\n\r\n          <td>{{buy.name}}</td>\r\n          <td>{{buy.description}}</td>\r\n          <td>{{buy.item}}</td>\r\n          <td>{{buy.cost}}</td>\r\n          <td>{{buy.count}}</td>\r\n          <td><button class=\"btn btn-danger\" (click)=\"deleteBuy(buy._id)\">Delete</button></td>\r\n\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n\r\n    <div\r\n         class=\"modal fage\"\r\n         id=\"buysModal\"\r\n         aria-hidden=\"true\"\r\n         aria-labelledby=\"modalLabel\"\r\n         tabindex=\"-1\">\r\n\r\n      <div class=\"modal-dialog\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"modalLabel\">{{editbuy.name}}</h5>\r\n            <button\r\n                    type=\"button\"\r\n                    data-bs-dismiss=\"modal\"\r\n                    aria-label=\"Close\"\r\n                    class=\"btn-close\"></button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <form>\r\n              <div class=\"row\">\r\n                <div class=\"col-5\">\r\n                  <input\r\n                         type=\"text\"\r\n                         class=\"form-control\"\r\n                         placeholder=\"Change name\"\r\n                         [(ngModel)]=\"editbuy.name\"\r\n                         name=\"ngEditBuyName\"/>\r\n                  \r\n                </div>\r\n                <div class=\"col-5\">\r\n                  <input\r\n                         type=\"number\"\r\n                         placeholder=\"Change count\"\r\n                         [(ngModel)]=\"editbuy.count\"\r\n                         (ngModelChange)=\"changeCost(false)\"\r\n                         name=\"ngEditBuyCount\"/>\r\n                  <p>{{editbuy.cost}}</p>\r\n                </div>\r\n              </div>\r\n              <div class=\"container\">\r\n                <textarea\r\n                          class=\"form-control\"\r\n                          rows=\"5\"\r\n                          [(ngModel)]=\"editbuy.description\"\r\n                          name=\"ngEditBuyDescription\"></textarea>\r\n              </div>\r\n            </form>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <div class=\"row\">\r\n              <div class=\"col-5\">\r\n                <button class=\"btn btn-secondary btn-close\" (click)=\"cancelEdit()\" >Cancel</button>\r\n              </div>\r\n              <div class=\"col-5\">\r\n                <button class=\"btn btn-successful\" (click)=\"saveEdit()\">Save</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n\r\n    </div>\r\n\r\n  </div>\r\n\r\n</div>\r\n"]},"metadata":{},"sourceType":"module"}