{"ast":null,"code":"import _asyncToGenerator from \"E:/TimmyFold/Programs/lovely_wires/lovely_wires/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { TemplateRef, ElementRef } from '@angular/core';\nimport { Wire } from './models/wire';\nimport { WireService } from '../services/wire.service';\nimport { Connectors } from './models/connector';\nimport { CoilService } from '../services/coil.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/wire.service\";\nimport * as i2 from \"../services/coil.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nconst _c0 = [\"readonlytemp\"];\nconst _c1 = [\"editabletemp\"];\nconst _c2 = [\"progresstest\"];\n\nfunction MakeWireComponent_option_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const name_r14 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(name_r14);\n  }\n}\n\nfunction MakeWireComponent_option_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const connector_r15 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(connector_r15);\n  }\n}\n\nfunction MakeWireComponent_option_48_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const connector_r16 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(connector_r16);\n  }\n}\n\nfunction MakeWireComponent_tr_77_ng_template_1_Template(rf, ctx) {}\n\nconst _c3 = function (a0) {\n  return {\n    $implicit: a0\n  };\n};\n\nfunction MakeWireComponent_tr_77_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵtemplate(1, MakeWireComponent_tr_77_ng_template_1_Template, 0, 0, \"ng-template\", 39);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const wire_r17 = ctx.$implicit;\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r9.LoadTemplate(wire_r17))(\"ngTemplateOutletContext\", i0.ɵɵpureFunction1(2, _c3, wire_r17));\n  }\n}\n\nfunction MakeWireComponent_ng_template_78_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"td\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\")(9, \"input\", 40);\n    i0.ɵɵlistener(\"click\", function MakeWireComponent_ng_template_78_Template_input_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r21);\n      const wire_r19 = restoredCtx.$implicit;\n      const ctx_r20 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r20.EditWire(wire_r19));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"td\")(11, \"input\", 41);\n    i0.ɵɵlistener(\"click\", function MakeWireComponent_ng_template_78_Template_input_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r21);\n      const wire_r19 = restoredCtx.$implicit;\n      const ctx_r22 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r22.DeleteWire(wire_r19));\n    });\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const wire_r19 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(wire_r19.wirename);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(wire_r19.wirefirstconn);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(wire_r19.wirelength);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(wire_r19.wiresecondconn);\n  }\n}\n\nfunction MakeWireComponent_ng_template_80_option_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const connector_r29 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(connector_r29);\n  }\n}\n\nfunction MakeWireComponent_ng_template_80_option_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const connector_r30 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(connector_r30);\n  }\n}\n\nfunction MakeWireComponent_ng_template_80_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r32 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"td\")(1, \"input\", 42, 43);\n    i0.ɵɵlistener(\"ngModelChange\", function MakeWireComponent_ng_template_80_Template_input_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r32);\n      const ctx_r31 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r31.editWire.wirename = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(3, \"td\")(4, \"select\", 44, 45);\n    i0.ɵɵlistener(\"ngModelChange\", function MakeWireComponent_ng_template_80_Template_select_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r32);\n      const ctx_r33 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r33.editWire.wirefirstconn = $event);\n    });\n    i0.ɵɵtemplate(6, MakeWireComponent_ng_template_80_option_6_Template, 2, 1, \"option\", 17);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"td\")(8, \"input\", 46, 47);\n    i0.ɵɵlistener(\"ngModelChange\", function MakeWireComponent_ng_template_80_Template_input_ngModelChange_8_listener() {\n      i0.ɵɵrestoreView(_r32);\n\n      const _r26 = i0.ɵɵreference(9);\n\n      const ctx_r34 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r34.MinusCancelEdit(_r26));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"td\")(11, \"select\", 44, 48);\n    i0.ɵɵlistener(\"ngModelChange\", function MakeWireComponent_ng_template_80_Template_select_ngModelChange_11_listener($event) {\n      i0.ɵɵrestoreView(_r32);\n      const ctx_r35 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r35.editWire.wiresecondconn = $event);\n    });\n    i0.ɵɵtemplate(13, MakeWireComponent_ng_template_80_option_13_Template, 2, 1, \"option\", 17);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"td\")(15, \"input\", 49);\n    i0.ɵɵlistener(\"click\", function MakeWireComponent_ng_template_80_Template_input_click_15_listener() {\n      i0.ɵɵrestoreView(_r32);\n      const ctx_r36 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r36.PutWire());\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"td\")(17, \"input\", 50);\n    i0.ɵɵlistener(\"click\", function MakeWireComponent_ng_template_80_Template_input_click_17_listener() {\n      i0.ɵɵrestoreView(_r32);\n      const ctx_r37 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r37.CancelEdit());\n    });\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const _r23 = i0.ɵɵreference(2);\n\n    const _r24 = i0.ɵɵreference(5);\n\n    const _r26 = i0.ɵɵreference(9);\n\n    const _r27 = i0.ɵɵreference(12);\n\n    const ctx_r13 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r13.editWire.wirename);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r13.editWire.wirefirstconn);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r13.connectors);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r13.editWire.wirelength);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r13.editWire.wiresecondconn);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r13.connectors);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", _r24.invalid || _r23.invalid || _r26.invalid || _r27.invalid);\n  }\n}\n\nexport class MakeWireComponent {\n  constructor(serv, service) {\n    this.serv = serv;\n    this.service = service;\n    this.editWire = null;\n    this.newWire = null;\n    this.coilname = \"\";\n    this.availablelength = 0;\n    this.coillength = 0;\n    this.wires = new Array();\n    this.coils = new Array();\n    this.coilsname = new Array();\n    this.newWire = new Wire(\"\", \"\", \"\", \"\", null, 0); //this.coilsname.push(\"test2\");\n    //this.service.getCoils().subscribe((data: Array<Coil>) => {\n    //  this.coils = data;\n    //})\n\n    this.connectors = Connectors;\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.LoadWires();\n\n      yield _this.LoadCoils();\n\n      _this.coils.forEach(c => {\n        alert(c.name);\n\n        _this.coilsname.push(c.name);\n      });\n    })();\n  }\n\n  LoadWires() {\n    this.serv.getWires().subscribe(data => {\n      this.wires = data;\n    });\n  }\n\n  LoadCoils() {\n    this.service.getCoils().subscribe(data => {\n      this.coils = data;\n    });\n  }\n\n  ProgresChange() {\n    this.percent = this.availablelength / this.newWire.wirecoil.length * 100;\n    this.progressbar.nativeElement.style.width = `${this.percent}%`;\n  }\n\n  LoadTemplate(wire) {\n    if (this.editWire != null && this.editWire._id == wire._id) {\n      return this.editabletemp;\n    }\n\n    return this.readonlytemp;\n  }\n\n  EditWire(wire) {\n    this.editWire = new Wire(wire._id, wire.wirename, wire.wirefirstconn, wire.wiresecondconn, null, wire.wirelength);\n  }\n\n  PutWire() {\n    this.serv.editWire(this.editWire).subscribe(_ => {\n      this.LoadWires();\n      this.status = \"Успешно отредактировано\";\n      this.editWire = null;\n    });\n  }\n\n  PostWire() {\n    this.serv.postWire(this.newWire).subscribe(_ => {\n      this.LoadWires();\n      this.status = `Кабель ${this.newWire.wirename} успешно создан, его характеристики: ${this.newWire.wirefirstconn}-${this.newWire.wiresecondconn},${this.newWire.wirelength}м`;\n    });\n  }\n\n  DeleteWire(delwire) {\n    this.serv.deleteWire(delwire._id).subscribe(_ => {\n      this.status = \"Успешно удалено\";\n      this.LoadWires();\n    });\n  }\n\n  CancelEdit() {\n    this.editWire = null;\n  }\n\n  MinusCancelNew(length) {\n    if (length.value < 0) {\n      length.reset();\n    } else {\n      this.newWire.wirelength = length.value;\n      this.availablelength = this.newWire.wirecoil.length - length.value;\n      this.ProgresChange();\n    }\n  }\n\n  MinusCancelEdit(length) {\n    if (length.value < 0) {\n      length.reset();\n    } else {\n      this.editWire.wirelength = length.value;\n    }\n  }\n\n  SetCoil() {\n    this.newWire.wirecoil = this.coils.find(c => c.name == this.coilname);\n  }\n\n}\n\nMakeWireComponent.ɵfac = function MakeWireComponent_Factory(t) {\n  return new (t || MakeWireComponent)(i0.ɵɵdirectiveInject(i1.WireService), i0.ɵɵdirectiveInject(i2.CoilService));\n};\n\nMakeWireComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: MakeWireComponent,\n  selectors: [[\"make-wire\"]],\n  viewQuery: function MakeWireComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n      i0.ɵɵviewQuery(_c1, 5);\n      i0.ɵɵviewQuery(_c2, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.readonlytemp = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.editabletemp = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.progressbar = _t.first);\n    }\n  },\n  features: [i0.ɵɵProvidersFeature([WireService, CoilService])],\n  decls: 82,\n  vars: 20,\n  consts: [[1, \"container-fluid\", \"bg-light\"], [1, \"text-center\", \"mb-5\"], [1, \"container\", \"mb-10\"], [1, \"row\", \"justify-content-between\"], [1, \"col-4\", \"col-lg-4\"], [\"for\", \"WireName\", 1, \"text-primary\"], [\"type\", \"text\", \"id\", \"WireName\", \"required\", \"\", 1, \"form-control\", \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"wirename\", \"ngModel\"], [1, \"alert\", \"alert-danger\", 3, \"hidden\"], [1, \"col-4\", \"col-lg-4\", \"text-center\"], [\"for\", \"LenghtProgress\", 1, \"text-primary\", \"mb-2\"], [1, \"progress\"], [\"role\", \"progressbar\", \"aria-valuemin\", \"0\", 1, \"progress-bar\", \"progress-bar-striped\", \"progress-bar-animated\"], [\"progresstest\", \"\"], [\"for\", \"CoilWire\", 1, \"text-primary\"], [\"id\", \"CoilWire\", \"aria-label\", \"open\", \"required\", \"\", 1, \"form-select\", \"form-select-md\", 3, \"ngModel\", \"ngModelChange\"], [\"wirecoil\", \"ngModel\"], [4, \"ngFor\", \"ngForOf\"], [1, \"row\", \"justify-content-between\", \"mb-5\"], [1, \"col-5\", \"col-md-3\"], [\"for\", \"WireConn1\", 1, \"text-primary\"], [\"id\", \"WireConn1\", \"aria-label\", \"open\", \"required\", \"\", 1, \"form-select\", \"form-select-md\", 3, \"ngModel\", \"ngModelChange\"], [\"firstconn\", \"ngModel\"], [1, \"col-2\", \"col-md-3\", \"text-center\"], [\"for\", \"WireLength\", 1, \"text-primary\"], [\"type\", \"number\", \"id\", \"WireLength\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"length\", \"ngModel\"], [\"for\", \"WireConn2\", 1, \"text-primary\"], [\"id\", \"WireConn2\", \"aria-label\", \"open\", \"required\", \"\", 1, \"form-select\", \"form-select-md\", 3, \"ngModel\", \"ngModelChange\"], [\"secondconn\", \"ngModel\"], [1, \"row\", \"justify-content-center\", \"mb-3\"], [1, \"container\", \"text-center\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [1, \"mb-3\"], [1, \"row\"], [1, \"col-12\"], [1, \"table\", \"table-striped\", \"table-primary\", \"table-hover\", \"text-center\"], [\"readonlytemp\", \"\"], [\"editabletemp\", \"\"], [3, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [\"type\", \"button\", \"value\", \"Edit\", 1, \"btn\", \"btn-warning\", 3, \"click\"], [\"type\", \"button\", \"value\", \"Delete\", 1, \"btn\", \"btn-danger\", 3, \"click\"], [\"type\", \"text\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"editname\", \"ngModel\"], [\"aria-label\", \"open\", \"required\", \"\", 1, \"form-select\", \"form-select-md\", 3, \"ngModel\", \"ngModelChange\"], [\"editfirstconn\", \"ngModel\"], [\"type\", \"number\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"editlength\", \"ngModel\"], [\"editsecondconn\", \"ngModel\"], [\"type\", \"button\", \"value\", \"Save\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [\"type\", \"button\", \"value\", \"Cancel\", 1, \"btn\", \"btn-warning\", 3, \"click\"]],\n  template: function MakeWireComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r38 = i0.ɵɵgetCurrentView();\n\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\", 1);\n      i0.ɵɵtext(2, \"Wires Manager\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 2)(4, \"div\", 3)(5, \"div\", 4)(6, \"label\", 5);\n      i0.ɵɵtext(7, \"Wire name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"input\", 6, 7);\n      i0.ɵɵlistener(\"ngModelChange\", function MakeWireComponent_Template_input_ngModelChange_8_listener($event) {\n        return ctx.newWire.wirename = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"div\", 8);\n      i0.ɵɵtext(11, \" \\u041D\\u0435 \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D\\u043E \\u0438\\u043C\\u044F \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(12, \"div\", 9)(13, \"label\", 10);\n      i0.ɵɵtext(14, \"\\u041E\\u0441\\u0442\\u0430\\u0432\\u0448\\u0430\\u044F\\u0441\\u044F \\u0434\\u043B\\u0438\\u043D\\u0430\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"div\", 11)(16, \"div\", 12, 13);\n      i0.ɵɵtext(18);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(19, \"div\", 4)(20, \"label\", 14);\n      i0.ɵɵtext(21, \"Wire's coil\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"select\", 15, 16);\n      i0.ɵɵlistener(\"ngModelChange\", function MakeWireComponent_Template_select_ngModelChange_22_listener($event) {\n        return ctx.coilname = $event;\n      })(\"ngModelChange\", function MakeWireComponent_Template_select_ngModelChange_22_listener() {\n        return ctx.SetCoil();\n      });\n      i0.ɵɵtemplate(24, MakeWireComponent_option_24_Template, 2, 1, \"option\", 17);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"div\", 8);\n      i0.ɵɵtext(26, \" \\u041D\\u0435\\u043E\\u0431\\u0445\\u043E\\u0434\\u0438\\u043C\\u043E \\u0443\\u043A\\u0430\\u0437\\u0430\\u0442\\u044C \\u043A\\u0430\\u0442\\u0443\\u0448\\u043A\\u0443 \\u0438\\u0437 \\u043A\\u043E\\u0442\\u043E\\u0440\\u043E\\u0439 \\u0431\\u0443\\u0434\\u0435\\u0442 \\u0441\\u0434\\u0435\\u043B\\u0430\\u043D \\u043F\\u0440\\u043E\\u0432\\u043E\\u0434 \");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(27, \"div\", 18)(28, \"div\", 19)(29, \"label\", 20);\n      i0.ɵɵtext(30, \"First connector type\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(31, \"select\", 21, 22);\n      i0.ɵɵlistener(\"ngModelChange\", function MakeWireComponent_Template_select_ngModelChange_31_listener($event) {\n        return ctx.newWire.wirefirstconn = $event;\n      });\n      i0.ɵɵtemplate(33, MakeWireComponent_option_33_Template, 2, 1, \"option\", 17);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(34, \"div\", 8);\n      i0.ɵɵtext(35, \" \\u041D\\u0435 \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D \\u0440\\u0430\\u0437\\u044A\\u0435\\u043C \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(36, \"div\", 23)(37, \"label\", 24);\n      i0.ɵɵtext(38, \"Length \\u043C\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(39, \"input\", 25, 26);\n      i0.ɵɵlistener(\"ngModelChange\", function MakeWireComponent_Template_input_ngModelChange_39_listener() {\n        i0.ɵɵrestoreView(_r38);\n\n        const _r6 = i0.ɵɵreference(40);\n\n        return i0.ɵɵresetView(ctx.MinusCancelNew(_r6));\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(41, \"div\", 8);\n      i0.ɵɵtext(42, \" \\u041D\\u0435 \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D\\u0430 \\u0434\\u043B\\u0438\\u043D\\u0430 \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(43, \"div\", 19)(44, \"label\", 27);\n      i0.ɵɵtext(45, \"Second connector type\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(46, \"select\", 28, 29);\n      i0.ɵɵlistener(\"ngModelChange\", function MakeWireComponent_Template_select_ngModelChange_46_listener($event) {\n        return ctx.newWire.wiresecondconn = $event;\n      });\n      i0.ɵɵtemplate(48, MakeWireComponent_option_48_Template, 2, 1, \"option\", 17);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(49, \"div\", 8);\n      i0.ɵɵtext(50, \" \\u041D\\u0435 \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D \\u0440\\u0430\\u0437\\u044C\\u0435\\u043C \");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(51, \"div\", 30)(52, \"div\", 31)(53, \"button\", 32);\n      i0.ɵɵlistener(\"click\", function MakeWireComponent_Template_button_click_53_listener() {\n        return ctx.PostWire();\n      });\n      i0.ɵɵtext(54, \"Make Wire\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(55, \"h2\", 33);\n      i0.ɵɵtext(56);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(57, \"h2\");\n      i0.ɵɵtext(58);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(59, \"div\", 34)(60, \"div\", 35)(61, \"table\", 36)(62, \"thead\")(63, \"tr\")(64, \"th\");\n      i0.ɵɵtext(65, \"Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(66, \"th\");\n      i0.ɵɵtext(67, \"First connector\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(68, \"th\");\n      i0.ɵɵtext(69, \"Length\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(70, \"th\");\n      i0.ɵɵtext(71, \"Second connector\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(72, \"th\");\n      i0.ɵɵtext(73, \"Edit\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(74, \"th\");\n      i0.ɵɵtext(75, \"Delete\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(76, \"tbody\");\n      i0.ɵɵtemplate(77, MakeWireComponent_tr_77_Template, 2, 4, \"tr\", 17);\n      i0.ɵɵelementEnd()()()()()();\n      i0.ɵɵtemplate(78, MakeWireComponent_ng_template_78_Template, 12, 4, \"ng-template\", null, 37, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(80, MakeWireComponent_ng_template_80_Template, 18, 7, \"ng-template\", null, 38, i0.ɵɵtemplateRefExtractor);\n    }\n\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(9);\n\n      const _r2 = i0.ɵɵreference(23);\n\n      const _r4 = i0.ɵɵreference(32);\n\n      const _r6 = i0.ɵɵreference(40);\n\n      const _r7 = i0.ɵɵreference(47);\n\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngModel\", ctx.newWire.wirename);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hidden\", _r0.valid || _r0.untouched);\n      i0.ɵɵadvance(6);\n      i0.ɵɵattribute(\"aria-valuenow\", ctx.availablelength)(\"aria-valuemax\", ctx.coillength);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.availablelength);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.coilname);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.coilsname);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"hidden\", _r2.untouched || _r2.valid);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.newWire.wirefirstconn);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.connectors);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"hidden\", _r4.valid || _r4.untouched);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.newWire.wirelength);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hidden\", _r6.valid || _r6.untouched);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.newWire.wiresecondconn);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.connectors);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"hidden\", _r7.valid || _r7.untouched);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"disabled\", _r0.invalid || _r4.invalid || _r6.invalid || _r7.invalid);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate(ctx.status);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.availablelength);\n      i0.ɵɵadvance(19);\n      i0.ɵɵproperty(\"ngForOf\", ctx.wires);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgTemplateOutlet, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.NumberValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.RequiredValidator, i4.NgModel],\n  styles: [\".fill[_ngcontent-%COMP%]{\\r\\n\\r\\n    width:0%;\\r\\n    \\r\\n    \\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm15LXN0eWxlcy5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0lBRUksUUFBUTs7O0FBR1oiLCJmaWxlIjoibXktc3R5bGVzLmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5maWxse1xyXG5cclxuICAgIHdpZHRoOjAlO1xyXG4gICAgXHJcbiAgICBcclxufVxyXG4iXX0= */\"]\n});","map":{"version":3,"mappings":"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","names":["TemplateRef","ElementRef","Wire","WireService","Connectors","CoilService","i0","MakeWireComponent","constructor","serv","service","wires","Array","coils","coilsname","newWire","connectors","ngOnInit","LoadWires","LoadCoils","forEach","c","alert","name","push","getWires","subscribe","data","getCoils","ProgresChange","percent","availablelength","wirecoil","length","progressbar","nativeElement","style","width","LoadTemplate","wire","editWire","_id","editabletemp","readonlytemp","EditWire","wirename","wirefirstconn","wiresecondconn","wirelength","PutWire","_","status","PostWire","postWire","DeleteWire","delwire","deleteWire","CancelEdit","MinusCancelNew","value","reset","MinusCancelEdit","SetCoil","find","coilname","selectors","viewQuery","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["E:\\TimmyFold\\Programs\\lovely_wires\\lovely_wires\\src\\app\\components\\makewire.component.ts","E:\\TimmyFold\\Programs\\lovely_wires\\lovely_wires\\src\\app\\components\\html\\makewire.component.html"],"sourcesContent":["import { Component, TemplateRef, OnInit, ViewChild,ElementRef } from '@angular/core';\r\nimport { Wire } from './models/wire';\r\nimport { WireService } from '../services/wire.service';\r\nimport { Connectors } from './models/connector';\r\nimport { NgModel } from '@angular/forms';\r\nimport { CoilService } from '../services/coil.service';\r\nimport { Coil } from './models/coil';\r\n\r\n@Component({\r\n  selector: 'make-wire',\r\n  templateUrl: './html/makewire.component.html',\r\n  styleUrls:['../styles/my-styles.css'],\r\n  providers: [WireService,CoilService]\r\n})\r\n\r\n  \r\n\r\nexport class MakeWireComponent implements OnInit {\r\n\r\n  @ViewChild('readonlytemp', { static: false })\r\n  readonlytemp: TemplateRef<any> | undefined;\r\n\r\n  @ViewChild('editabletemp', { static: false })\r\n  editabletemp: TemplateRef<any> | undefined;\r\n\r\n  @ViewChild('progresstest', { static: false })\r\n  progressbar: ElementRef | undefined;\r\n\r\n  \r\n\r\n  \r\n\r\n  async ngOnInit() {\r\n    this.LoadWires();\r\n    await this.LoadCoils();\r\n\r\n    this.coils.forEach(c => {\r\n\r\n      alert(c.name);\r\n      this.coilsname.push(c.name);\r\n\r\n\r\n    })\r\n\r\n  }\r\n\r\n  wires: Array<Wire>;\r\n\r\n  coils: Array<Coil>;\r\n\r\n  connectors: Array<string>;\r\n\r\n  coilsname: Array<string>;\r\n\r\n  currentcoil: Coil;\r\n\r\n  editWire: Wire | null=null;\r\n\r\n  newWire: Wire | null = null;\r\n\r\n  coilname: string = \"\";\r\n\r\n  availablelength: number = 0;\r\n\r\n  coillength: number = 0;\r\n\r\n  status: string;\r\n\r\n  percent: number;\r\n\r\n  constructor(private serv: WireService, private service: CoilService) {\r\n\r\n    this.wires = new Array<Wire>();\r\n\r\n    this.coils = new Array<Coil>();\r\n\r\n    this.coilsname = new Array<string>();\r\n\r\n    this.newWire = new Wire(\"\", \"\", \"\", \"\", null, 0);\r\n\r\n    //this.coilsname.push(\"test2\");\r\n\r\n    //this.service.getCoils().subscribe((data: Array<Coil>) => {\r\n\r\n    //  this.coils = data;\r\n\r\n    //})\r\n\r\n\r\n\r\n    \r\n    this.connectors = Connectors;\r\n\r\n  }\r\n\r\n  private LoadWires() {\r\n\r\n    this.serv.getWires().subscribe((data: Array<Wire>) => {\r\n\r\n      this.wires = data;\r\n\r\n    })\r\n  }\r\n\r\n  private LoadCoils() {\r\n\r\n   \r\n\r\n    this.service.getCoils().subscribe((data: Array<Coil>) => {\r\n\r\n      this.coils = data;\r\n\r\n     \r\n\r\n     \r\n\r\n    })\r\n\r\n   \r\n\r\n   \r\n\r\n  }\r\n\r\n  ProgresChange() {\r\n\r\n    this.percent = this.availablelength/this.newWire.wirecoil.length * 100  ;\r\n\r\n    this.progressbar.nativeElement.style.width = `${this.percent}%`;\r\n\r\n\r\n  }\r\n\r\n  LoadTemplate(wire: Wire) {\r\n\r\n    if (this.editWire != null && this.editWire._id == wire._id) {\r\n\r\n      return this.editabletemp;\r\n\r\n    }\r\n    return this.readonlytemp;\r\n\r\n  }\r\n\r\n  \r\n\r\n  EditWire(wire: Wire) {\r\n\r\n    this.editWire = new Wire(wire._id, wire.wirename, wire.wirefirstconn, wire.wiresecondconn,null, wire.wirelength);\r\n\r\n  }\r\n\r\n\r\n\r\n  PutWire() {\r\n\r\n    this.serv.editWire(this.editWire as Wire).subscribe(_ => {\r\n\r\n      this.LoadWires();\r\n      this.status = \"Успешно отредактировано\";\r\n      this.editWire = null;\r\n\r\n\r\n    })\r\n\r\n  }\r\n\r\n  PostWire() {\r\n\r\n    this.serv.postWire(this.newWire as Wire).subscribe(_ => {\r\n      this.LoadWires();\r\n      this.status = `Кабель ${this.newWire.wirename} успешно создан, его характеристики: ${this.newWire.wirefirstconn}-${this.newWire.wiresecondconn},${this.newWire.wirelength}м`;\r\n\r\n    })\r\n    \r\n    \r\n\r\n  }\r\n\r\n\r\n  DeleteWire(delwire:Wire) {\r\n\r\n    this.serv.deleteWire(delwire._id).subscribe(_ => {\r\n\r\n      this.status = \"Успешно удалено\";\r\n      this.LoadWires();\r\n\r\n    })\r\n\r\n  }\r\n\r\n  CancelEdit() {\r\n\r\n    this.editWire = null;\r\n\r\n  }\r\n\r\n  MinusCancelNew(length: NgModel) {\r\n\r\n    if (length.value < 0) {\r\n      length.reset();\r\n    }\r\n    else {\r\n      this.newWire.wirelength = length.value;\r\n      this.availablelength = this.newWire.wirecoil.length - length.value;\r\n      this.ProgresChange();\r\n    }\r\n\r\n  }\r\n\r\n  MinusCancelEdit(length: NgModel) {\r\n\r\n    if (length.value < 0) {\r\n      length.reset();\r\n    }\r\n    else {\r\n      this.editWire.wirelength = length.value;\r\n    }\r\n\r\n  }\r\n\r\n  SetCoil() {\r\n\r\n    \r\n    this.newWire.wirecoil = this.coils.find(c => c.name == this.coilname);\r\n\r\n\r\n  }\r\n\r\n}\r\n","<div class=\"container-fluid bg-light\">\r\n  <h1 class=\"text-center mb-5\">Wires Manager</h1>\r\n\r\n  <div class=\"container mb-10\">\r\n\r\n    <div class=\"row justify-content-between\">\r\n\r\n      <div class=\"col-4 col-lg-4\">\r\n\r\n        <label for=\"WireName\" class=\"text-primary\">Wire name</label>\r\n        <input type=\"text\" class=\"form-control form-control\" id=\"WireName\" [(ngModel)]=\"newWire.wirename\" #wirename=\"ngModel\" required>\r\n        <div [hidden]=\"wirename.valid||wirename.untouched\" class=\"alert alert-danger\">\r\n          Не указано имя\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <div class=\"col-4 col-lg-4 text-center\">\r\n\r\n        <label for=\"LenghtProgress\" class=\"text-primary mb-2\">Оставшаяся длина</label>\r\n        <div class=\"progress\">\r\n\r\n          <div class=\"progress-bar progress-bar-striped progress-bar-animated\" role=\"progressbar\" attr.aria-valuenow=\"{{availablelength}}\" aria-valuemin=\"0\" attr.aria-valuemax=\"{{coillength}}\" #progresstest >{{availablelength}}</div>\r\n          \r\n        </div>\r\n\r\n      </div>\r\n\r\n      <div class=\"col-4 col-lg-4\">\r\n\r\n        <label for=\"CoilWire\" class=\"text-primary\">Wire's coil</label>\r\n        <select id=\"CoilWire\" class=\"form-select form-select-md\" aria-label=\"open\" [(ngModel)]=\"coilname\" (ngModelChange)=\"SetCoil()\" #wirecoil=\"ngModel\" required>\r\n          <option *ngFor=\"let name of coilsname\">{{name}}</option>\r\n        </select>\r\n        <div [hidden]=\"wirecoil.untouched||wirecoil.valid\" class=\"alert alert-danger\">\r\n          Необходимо указать катушку из которой будет сделан провод\r\n        </div>\r\n\r\n      </div>\r\n\r\n    </div>\r\n\r\n\r\n    <div class=\"row justify-content-between mb-5\">\r\n\r\n      <div class=\"col-5 col-md-3\">\r\n\r\n        <label class=\"text-primary\" for=\"WireConn1\">First connector type</label>\r\n        <select id=\"WireConn1\" class=\"form-select form-select-md\" aria-label=\"open\" [(ngModel)]=\"newWire.wirefirstconn\" #firstconn=\"ngModel\" required>\r\n          <option *ngFor=\"let connector of connectors\">{{connector}}</option>\r\n        </select>\r\n        <div [hidden]=\"firstconn.valid||firstconn.untouched\" class=\"alert alert-danger\">\r\n          Не указан разъем\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <div class=\"col-2 col-md-3 text-center\">\r\n\r\n        <label class=\"text-primary\" for=\"WireLength\">Length м</label>\r\n        <input type=\"number\" id=\"WireLength\" class=\"form-control\" (ngModelChange)=\"MinusCancelNew(length)\" [ngModel]=\"newWire.wirelength\" #length=\"ngModel\" required />\r\n        <div [hidden]=\"length.valid||length.untouched\" class=\"alert alert-danger\">\r\n          Не указана длина\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <div class=\"col-5 col-md-3\">\r\n\r\n        <label class=\"text-primary\" for=\"WireConn2\">Second connector type</label>\r\n        <select id=\"WireConn2\" class=\"form-select form-select-md\" aria-label=\"open\" [(ngModel)]=\"newWire.wiresecondconn\" #secondconn=\"ngModel\" required>\r\n          <option *ngFor=\"let connector of connectors\">{{connector}}</option>\r\n        </select>\r\n        <div [hidden]=\"secondconn.valid||secondconn.untouched\" class=\"alert alert-danger\">\r\n          Не указан разьем\r\n        </div>\r\n\r\n      </div>\r\n\r\n    </div>\r\n\r\n    <div class=\"row justify-content-center mb-3\">\r\n\r\n      <div class=\"container text-center\">\r\n        <button type=\"submit\" class=\"btn btn-primary\" (click)=\"PostWire()\" [disabled]=\"wirename.invalid||firstconn.invalid||length.invalid||secondconn.invalid\">Make Wire</button>\r\n      </div>\r\n\r\n    </div>\r\n\r\n    <h2 class=\"mb-3\">{{status}}</h2>\r\n\r\n    <h2>{{availablelength}}</h2>\r\n\r\n    <div class=\"row\">\r\n\r\n      <div class=\"col-12\">\r\n        <table class=\"table table-striped table-primary table-hover text-center\">\r\n          <thead>\r\n            <tr>\r\n              <th>Name</th>\r\n              <th>First connector</th>\r\n              <th>Length</th>\r\n              <th>Second connector</th>\r\n              <th>Edit</th>\r\n              <th>Delete</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n\r\n            <tr *ngFor=\"let wire of wires\">\r\n\r\n              <ng-template [ngTemplateOutlet]=\"LoadTemplate(wire)\"\r\n                           [ngTemplateOutletContext]=\"{$implicit:wire}\">\r\n\r\n              </ng-template>\r\n\r\n            </tr>\r\n\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n    </div>\r\n\r\n\r\n  </div>\r\n</div>\r\n  \r\n\r\n<ng-template #readonlytemp let-wire>\r\n\r\n  \r\n  <td>{{wire.wirename}}</td>\r\n  <td>{{wire.wirefirstconn}}</td>\r\n  <td>{{wire.wirelength}}</td>\r\n  <td>{{wire.wiresecondconn}}</td>\r\n  <td>\r\n    <input type=\"button\" class=\"btn btn-warning\" value=\"Edit\" (click)=\"EditWire(wire)\" />\r\n  </td>\r\n  <td>\r\n    <input type=\"button\" class=\"btn btn-danger\" value=\"Delete\" (click) =\"DeleteWire(wire)\" />\r\n  </td>\r\n\r\n</ng-template>\r\n\r\n\r\n<ng-template #editabletemp>\r\n  \r\n  \r\n  <td>\r\n    <input type=\"text\" [(ngModel)] = \"editWire.wirename\" class=\"form-control\" #editname=\"ngModel\" required />\r\n  </td>\r\n  <td>\r\n    <select class=\"form-select form-select-md\" aria-label=\"open\" [(ngModel)]=\"editWire.wirefirstconn\" #editfirstconn=\"ngModel\" required>\r\n      <option *ngFor=\"let connector of connectors\">{{connector}}</option>\r\n    </select>\r\n  </td>\r\n  <td>\r\n    <input type=\"number\" (ngModelChange) = \"MinusCancelEdit(editlength)\" [ngModel] = \"editWire.wirelength\" class=\"form-control\" #editlength=\"ngModel\" required />\r\n  </td>\r\n  <td>\r\n    <select class=\"form-select form-select-md\" aria-label=\"open\" [(ngModel)]=\"editWire.wiresecondconn\" #editsecondconn=\"ngModel\" required>\r\n      <option *ngFor=\"let connector of connectors\">{{connector}}</option>\r\n    </select>\r\n  </td>\r\n  <td>\r\n    <input type=\"button\" class=\"btn btn-primary\" value=\"Save\" (click) = \"PutWire()\" [disabled]=\"editfirstconn.invalid||editname.invalid||editlength.invalid||editsecondconn.invalid\" />\r\n  </td>\r\n  <td>\r\n    <input type=\"button\" class=\"btn btn-warning\" value=\"Cancel\" (click) = \"CancelEdit()\" />\r\n  </td>\r\n\r\n</ng-template>\r\n"]},"metadata":{},"sourceType":"module"}